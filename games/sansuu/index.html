<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>„Åï„Çì„Åô„ÅÜ„Ç≤„Éº„É† | „Åç„Åü„ÅÆ„Çì</title>
    <link rel="stylesheet" href="../../assets/css/site.css?v=2">
    <link rel="stylesheet" href="game.css">
</head>

<body>
    <!-- Game Container -->
    <div id="game-container">
        <!-- Background Layer -->
        <canvas id="game-canvas"></canvas>

        <!-- HUD Layer -->
        <div id="ui-layer">
            <div class="hud-top">
                <div class="score-box">
                    <span class="label">„Çπ„Ç≥„Ç¢</span>
                    <span id="score-display">0</span>
                </div>
                <div class="question-box">
                    <span id="question-text">? + ?</span>
                </div>
                <!-- TImer Box -->
                <div class="timer-box"
                    style="background:#fff; padding:5px 12px; border-radius:15px; border:2px solid #ccc; font-weight:bold; color:#555; display:flex; align-items:center; gap:5px;">
                    <span>‚è∞</span>
                    <span id="time-display">60</span>
                </div>
                <div class="menu-btn-container">
                    <button id="pause-btn" class="icon-btn" aria-label="„É°„Éã„É•„Éº">III</button>
                </div>
            </div>

            <div class="hud-combo hidden" id="combo-display">
                <span id="combo-count">0</span> COMBO!!
            </div>
        </div>

        <!-- Overlays -->
        <div id="overlay-start" class="overlay active">
            <div class="modal">
                <div class="mascot-wrapper">
                    <img src="../../assets/characters/kitannon_normal.png" alt="„Åç„Åü„ÅÆ„Çì" class="mascot">
                </div>
                <h2>„Åï„Çì„Åô„ÅÜ„Ç≤„Éº„É†</h2>
                <p>„Åµ„ÅÜ„Åõ„Çì„Çí „Åü„Å£„Å°„Åó„Å¶<br>„Åì„Åü„Åà„Çà„ÅÜÔºÅ</p>

                <div class="settings-preview">
                    <!-- Grade Layout -->
                    <div style="margin-bottom: 12px;">
                        <label for="grade-select"
                            style="font-weight:bold; display:block; margin-bottom:5px; color:#5d4037;">„Åå„Åè„Å≠„Çì
                            (Grade)</label>
                        <select id="grade-select"
                            style="font-size: 1.1rem; padding: 8px; border-radius: 10px; border: 2px solid #ccc; width: 100%; max-width: 200px; text-align:center;">
                            <option value="1">1„Å≠„Çì („Åü„Åó„Åñ„Çì)</option>
                            <option value="2">2„Å≠„Çì (2„Åë„Åü)</option>
                            <option value="3">3„Å≠„Çì („Åã„ÅëÁÆó)</option>
                            <option value="4">4„Å≠„Çì („Çè„ÇäÁÆó)</option>
                            <option value="5">5„Å≠„Çì (Â∞èÊï∞)</option>
                            <option value="6">6„Å≠„Çì (ÈÄü„Åï„Å™„Å©)</option>
                        </select>
                    </div>

                    <label style="display: block; margin-top: 10px;">
                        <input type="checkbox" id="sound-toggle-start" checked>
                        üîä Èü≥„ÅÇ„Çä
                    </label>
                </div>

                <button id="start-btn" class="btn btn-lg">„Çπ„Çø„Éº„Éà</button>
                <div style="margin-top:20px;">
                    <a href="../../games/index.html" class="text-link">„ÇÇ„Å©„Çã</a>
                    <button id="settings-open-btn" class="text-link"
                        style="background:none; border:none; margin-left:15px;">‚öôÔ∏è Ë®≠ÂÆö</button>
                </div>
            </div>
        </div>

        <div id="overlay-gameover" class="overlay hidden">
            <div class="modal">
                <h2>„Åä„Åó„Åæ„ÅÑÔºÅ</h2>
                <div class="result-box">
                    <div class="score-row">
                        <span>„Çπ„Ç≥„Ç¢</span>
                        <span id="final-score" class="big-num">0</span>
                    </div>
                    <div class="score-row small">
                        <span>„Éè„Ç§„Çπ„Ç≥„Ç¢</span>
                        <span id="high-score">0</span>
                    </div>
                </div>
                <div class="btn-row">
                    <button id="retry-btn" class="btn">„ÇÇ„ÅÜ„ÅÑ„Å£„Åã„ÅÑ</button>
                    <a href="../../games/index.html" class="btn btn-secondary">„Åä„Çè„Çã</a>
                </div>
            </div>
        </div>

        <!-- Settings Modal (Guardian) -->
        <div id="overlay-settings" class="overlay hidden">
            <div class="modal settings-modal">
                <h3>‰øùË≠∑ËÄÖË®≠ÂÆö („Åª„Åî„Åó„ÇÉ„Åõ„Å£„Å¶„ÅÑ)</h3>

                <div class="setting-item">
                    <label>È¢®Ëàπ„ÅÆÈÄü„Åï</label>
                    <div class="toggle-group">
                        <input type="radio" name="speed" id="speed-normal" value="normal" checked>
                        <label for="speed-normal">„Åµ„Å§„ÅÜ (Normal)</label>

                        <input type="radio" name="speed" id="speed-slow" value="slow">
                        <label for="speed-slow">„ÇÜ„Å£„Åè„Çä (Slow)</label>
                    </div>
                </div>

                <div class="setting-item">
                    <label>‰ΩéÂ≠¶Âπ¥„É¢„Éº„Éâ („Éü„ÇπÊ∏õÁÇπ„Å™„Åó)</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="low-grade-mode">
                        <label for="low-grade-mode" class="switch-label"></label>
                    </div>
                </div>

                <div class="setting-item">
                    <label>Èü≥ÈáèË®≠ÂÆö</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="sound-toggle-settings" checked>
                        <label for="sound-toggle-settings">ÂäπÊûúÈü≥„ÉªBGM</label>
                    </div>
                </div>

                <button id="settings-close-btn" class="btn">„Å®„Åò„Çã</button>
            </div>
        </div>

        <!-- Character Feedback Overlay (Flash) -->
        <div id="char-feedback" class="feedback-layer hidden">
            <img id="feedback-img" src="../../assets/characters/kitannon_correct.png" alt="">
        </div>
    </div>

    <script src="game.js"></script>
</body>

</html>